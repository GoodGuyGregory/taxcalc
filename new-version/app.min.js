$(document).ready(function () {
    // Residential/Commerical toggle.
    $("#residential").on('click', function () {
        $("#residential").addClass('active');
        $("#commercial").removeClass('active');

        $('#mortgage-check').show();
    });

    $("#commercial").on('click', function () {
        $("#residential").removeClass('active');
        $("#commercial").addClass('active');

        $('#mortgage-check').hide();
        $('#mortgage').prop('checked', false);
    });

    // Form submit, do processing.
    $('#calculator-form').on('submit', function (event) {
        event.preventDefault();
        $('.alert-danger').hide();

        // Replace all commas in textbox.
        $('#gav').val($('#gav').val().replace(/,/g, ""));

        // Make sure the textbox is numeric.
        if (!$.isNumeric($('#gav').val())) {
            $('.alert-danger').show();
            $('.tax-result-container').hide();
            return;
        }

        // Variables.
        var tax_rate = 0.1890;
        var min_gav = 49850;
        var gav = $('#gav').val();
        var mortgage = 0;

        if (gav > min_gav) {
            if ($('#residential').hasClass('active')) {
                // Residential Formula.
                // Have $3,000 be subtracted if the mortgage box is checked.
                if ($('#mortgage').prop('checked')) {
                    mortgage = 3000;
                }

                // If GAV < $650,000.
                if (gav < 650000) {
                    net_av = (((gav - 45000) * 0.65) - mortgage) / 100;
                }
                else if (gav >= 650000) {
                    net_av = (((gav - 45000) * 0.75) - mortgage) / 100;
                }
            }
            else if ($('#commercial').hasClass('active')) {
                // Commercial Formula.
                net_av = gav / 100;
            }

            // Multiply Net AV by the Tax Rate.
            result = net_av * tax_rate;
        }
        else {
            result = 0;
        }

        // Output.
        $('#result').text(result.toFixed(2));

        $('.tax-result-container').show();
    });
});

$(document).ready(function () {
    // Residential/Commerical toggle.
    $("#residential").on('click', function () {
        $("#residential").addClass('active');
        $("#commercial").removeClass('active');

        $('#mortgage-check').show();
    });

    $("#commercial").on('click', function () {
        $("#residential").removeClass('active');
        $("#commercial").addClass('active');

        $('#mortgage-check').hide();
        $('#mortgage').prop('checked', false);
    });

    // Form submit, do processing.
    $('#calcTax').on('click', function (event) {
        event.preventDefault();

        // Replace all commas in textbox.
        $('#gav').val($('#gav').val().replace(/,/g, ""));

        // Make sure the textbox is numeric.
        if (!$.isNumeric($('#gav').val())) {
            $('.alert-danger').show();
            $('.tax-result-container').hide();
            return;
        }

        // Variables.
        var tax_rate = 0.3700;
        var min_gav = 49850;
        var gav = $('#gav').val();
        var mortgage = 0;

        if (gav > min_gav) {
            if ($('#residential').hasClass('active')) {
                // Residential Formula.
                // Have $3,000 be subtracted if the mortgage box is checked.
                if ($('#mortgage').prop('checked')) {
                    mortgage = 3000;
                }

                // If GAV < $650,000.
                if (gav < 650000) {
                    net_av = (((gav - 45000) * 0.65) - mortgage) / 100;
                }
                else if (gav >= 650000) {
                    net_av = (((gav - 45000) * 0.75) - mortgage) / 100;
                }
            }
            else if ($('#commercial').hasClass('active')) {
                // Commercial Formula.
                net_av = gav / 100;
            }

            // Multiply Net AV by the Tax Rate.
            result2 = net_av * tax_rate;
            difference = result - result2;
        }
        else {
            result2 = 0;
        }

        // Output.
        $('#result2').text(result2.toFixed(2));
        $('#difference').text(difference.toFixed(2));
        $('.tax-result-container').show();
    });
});